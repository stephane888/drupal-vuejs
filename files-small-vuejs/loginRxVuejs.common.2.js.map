{"version":3,"sources":["webpack://loginRxVuejs/./src/App/components/logingoogle.vue?0a6e","webpack://loginRxVuejs/./src/App/components/logingoogle.vue?d70a","webpack://loginRxVuejs/./src/App/rx/google.js","webpack://loginRxVuejs/./src/config.js","webpack://loginRxVuejs/./src/App/session.js","webpack://loginRxVuejs/./src/App/utilities.js","webpack://loginRxVuejs/src/App/components/logingoogle.vue","webpack://loginRxVuejs/./src/App/components/logingoogle.vue?fdec","webpack://loginRxVuejs/./src/App/components/logingoogle.vue","webpack://loginRxVuejs/./src/App/components/logingoogle.vue?c6b6"],"names":["userAccess","client_id","config","AjaxBasic","getRandomIntInclusive","min","max","Math","ceil","floor","random","url_session","token","getToken","Promise","resolv","console","log","BaseUrl","get","then","resp","data","utilities","dPost","url","datas","configCustom","session","Token","configs","mergeHeaders","post","headers","dGet","i"],"mappings":"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A,qBADA;AAEA;AACA;AACA,kBADA;AAEA;AAFA,KADA;AAKA;AACA,mBADA;AAEA;AAFA,KALA;AASA;AACA,iBADA;AAEA;AACA;AACA;AAJA;AATA,GAFA;AAkBA,SAlBA,qBAkBA;AAAA;;AACA;AACA;AACA;AACA,OAFA;AAGA,KAJA,MAIA;AACA;AACA;AACA,GA1BA;AA2BA;AACA,gBADA,0BACA;AACA;AACA;AAHA,GA3BA;AAgCA;AACA,wBADA,kCACA;AACA;;AACA;AACA;AACA,kHACA,QADA;AAEA;AAFA;AAIA;AACA;AACA;;AACA;;AACA;AACA;AACA,qCADA;AAEA;AAFA;AAIA,+CACA,0CADA,EAEA;AAAA;AAAA;AAAA,SAFA,CAEA;AAFA;AAIA,2CATA,CASA;AACA,OAVA;;AAWA;AACA,KAzBA;;AA0BA;AACA;AACA;AACA,wBA7BA,kCA6BA;AAAA;;AACA;AACA;AACA;AACA,sBACA,IADA,CACA,8BADA,EACA,iBADA,EAEA,IAFA,CAEA;AACA;AACA;AACA;AACA;;AACA;;AACA;AACA;AACA;AACA,WATA,CAUA;;;AACA,cACA,gBACA,4DAFA,EAGA;AACA;AACA,WALA,CAMA;AANA,eAOA;AACA;AACA,WAFA,MAEA;AACA;AACA;;AACA;AACA,SA1BA,WA2BA;AACA;AACA;AACA;AACA;;AACA,cACA,gBACA,uBADA,IAEA,6BAHA,EAIA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA,SA3CA;AA4CA,OA7CA;AA8CA;AA9EA;AAhCA,G;;ACtBoV,CAAgB,sHAAG,EAAC,C;;;;;;;;ACA9Q;AAC3B;AACL;AACc;;;AAGxE;AAC6F;AAC7F,gBAAgB,8CAAU;AAC1B,EAAE,8CAAM;AACR,EAAE,MAAM;AACR,EAAE,eAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEe,kG;;;;;;;ACnBf,uC","file":"loginRxVuejs.common.2.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logingoogle.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"buttton-google-aouth\",class:_vm.classRender,attrs:{\"id\":_vm.idHtmlrender}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//const gapi = window.gapi;\nexport default {\n  userAccess: {}, //contient les informations renvoyés par google apres approbations.\n  client_id:\n    \"513247959752-qapd9jb30pdtoh51m0h53070a2v8c4er.apps.googleusercontent.com\",\n};\n","import { AjaxBasic } from \"wbuutilities\";\nconst config = {\n  ...AjaxBasic,\n  /**\n   * Retoune un entier arleatoire entre [99-999]\n   */\n  getRandomIntInclusive(min = 99, max = 999) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n  },\n};\nexport default config;\n","import config from \"../config\";\nexport default {\n  url_session: \"/session/token\",\n  token: null,\n  /**\n   * Permet d'obtenir le token.\n   */\n  getToken() {\n    return new Promise((resolv) => {\n      if (this.token) resolv(this.token);\n      console.log(\n        \" Config :: \",\n        config.BaseUrl(),\n        \"\\n this.url_session :: \",\n        this.url_session\n      );\n      config.get(config.BaseUrl() + this.url_session).then((resp) => {\n        this.token = resp.data;\n        resolv(resp.data);\n      });\n    });\n  },\n};\n","import session from \"./session\";\nimport config from \"../config\";\n\nconst utilities = {\n  ...config,\n  /**\n   * configCustom[{name:\"\",value:\"\"}]\n   */\n  async dPost(url, datas, configCustom = null) {\n    const Token = await session.getToken();\n    var configs = {\n      \"X-CSRF-Token\": Token,\n      \"Content-Type\": \"application/json\",\n    };\n    if (configCustom) {\n      configs = this.mergeHeaders(configCustom, configs);\n    }\n    return this.post(url, datas, {\n      headers: configs,\n    });\n  },\n  /**\n   * Get datas;\n   */\n  async dGet(url, configCustom = null) {\n    const Token = await session.getToken();\n    var configs = {\n      \"X-CSRF-Token\": Token,\n      \"Content-Type\": \"application/json\",\n    };\n    if (configCustom) {\n      configs = this.mergeHeaders(configCustom, configs);\n    }\n    return this.get(url, {\n      headers: configs,\n    });\n  },\n  /**\n   *\n   */\n  mergeHeaders(configCustom, configs) {\n    if (configCustom) {\n      for (const i in configCustom) {\n        configs[i] = configCustom[i];\n      }\n    }\n    return configs;\n  },\n};\nexport default utilities;\n","<template>\n  <div\n    :id=\"idHtmlrender\"\n    class=\"buttton-google-aouth\"\n    :class=\"classRender\"\n  ></div>\n</template>\n\n<script>\nfunction loadScript(src) {\n  return new Promise((resolv) => {\n    var s = document.createElement(\"script\");\n    s.setAttribute(\"src\", src);\n    s.onload = function () {\n      console.log(\" Chargement du script ok : \", src);\n      resolv(true);\n    };\n    document.head.appendChild(s);\n  });\n}\nimport rxGoogle from \"../rx/google.js\";\nimport utilities from \"../utilities\";\nexport default {\n  name: \"logingoogle\",\n  props: {\n    idHtml: {\n      type: String,\n      required: true,\n    },\n    returnUidInfo: {\n      type: Boolean,\n      default: false,\n    },\n    classRender: {\n      type: Array,\n      default: function () {\n        return [\"mx-auto\"];\n      },\n    },\n  },\n  mounted() {\n    if (!window.google) {\n      loadScript(\"https://accounts.google.com/gsi/client\").then(() => {\n        this.getUserInfoFromFrame();\n      });\n    } else {\n      this.getUserInfoFromFrame();\n    }\n  },\n  computed: {\n    idHtmlrender() {\n      return \"google-login-tab\" + this.idHtml;\n    },\n  },\n  methods: {\n    getUserInfoFromFrame() {\n      var self = this;\n      function handleCredentialResponse(response) {\n        console.log(\"Encoded JWT ID token: \", response);\n        rxGoogle.userAccess = {\n          ...response,\n          client_id: response.clientId,\n        };\n        self.TryToLoginWithGoogle();\n        window.rxGoogle = rxGoogle;\n      }\n      console.log(\" window.onload ! \", window.onload);\n      const goo = () => {\n        window.google.accounts.id.initialize({\n          client_id: rxGoogle.client_id,\n          callback: handleCredentialResponse,\n        });\n        window.google.accounts.id.renderButton(\n          document.getElementById(self.idHtmlrender),\n          { theme: \"outline\", size: \"large\" } // customization attributes\n        );\n        window.google.accounts.id.prompt(); // also display the One Tap dialog\n      };\n      goo();\n    },\n    /**\n     * Ecoute un evenement afin de determiner si l'utilisateur a clique sur le bonton de connexion et que le processus soit terminé.\n     */\n    TryToLoginWithGoogle() {\n      // this.IsBusy();\n      // this.getFields();\n      return new Promise((resolv, reject) => {\n        utilities\n          .post(\"/login-rx-vuejs/google-check\", rxGoogle.userAccess)\n          .then((resp) => {\n            this.isBusy = false;\n            this.alertDisplay = true;\n            this.alertType = \"alert-success\";\n            this.alertText = \"Connexion réussie\";\n            this.$emit(\"ev_logingoogle\", resp.data);\n            if (this.returnUidInfo) {\n              resolv(resp);\n              return;\n            }\n            // --; Si l'utilisateur est redirigé vers un autre domaine.\n            if (\n              resp.reponse &&\n              resp.reponse.config.url !== resp.reponse.request.responseURL\n            ) {\n              window.location.assign(resp.reponse.request.responseURL);\n            }\n            // Il faut s'assurer que les données sont ok.\n            else if (resp.data && resp.data.createuser) {\n              this.stepe = \"final-gl-register\";\n            } else {\n              window.location.assign(window.location.origin);\n            }\n            resolv(resp);\n          })\n          .catch((errors) => {\n            this.isBusy = false;\n            this.alertDisplay = true;\n            this.alertType = \"alert-danger\";\n            this.alertText = \"Google : Erreur de connexion\";\n            if (\n              errors.error &&\n              errors.error.statusText &&\n              errors.error.statusText != \"\"\n            ) {\n              this.alertText = errors.error.statusText;\n            }\n            console.log(\" Error ajax \", errors.error);\n            console.log(\" Error ajax \", errors.code);\n            console.log(\" Error ajax \", errors.stack);\n            reject(errors);\n          });\n      });\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n.buttton-google-aouth {\n  max-width: 300px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: 2rem;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logingoogle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logingoogle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./logingoogle.vue?vue&type=template&id=2d1a67a0&\"\nimport script from \"./logingoogle.vue?vue&type=script&lang=js&\"\nexport * from \"./logingoogle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./logingoogle.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// extracted by mini-css-extract-plugin"],"sourceRoot":""}