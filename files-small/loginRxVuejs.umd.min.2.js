(("undefined"!==typeof self?self:this)["webpackJsonploginRxVuejs"]=("undefined"!==typeof self?self:this)["webpackJsonploginRxVuejs"]||[]).push([[2],{"0d95":function(e,n,t){"use strict";t("aaa3")},"628e":function(e,n,t){"use strict";t.r(n);var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"buttton-google-aouth",class:e.classRender,attrs:{id:e.idHtmlrender}})},r=[],s=t("5530"),i=(t("d3b7"),{userAccess:{},client_id:"513247959752-qapd9jb30pdtoh51m0h53070a2v8c4er.apps.googleusercontent.com"}),a=t("1da1"),c=(t("96cf"),t("e6cf"),t("bfb1")),l=Object(s["a"])(Object(s["a"])({},c["a"]),{},{getRandomIntInclusive:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:99,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999;return e=Math.ceil(e),n=Math.floor(n),Math.floor(Math.random()*(n-e+1))+e}}),u=l,d={url_session:"/session/token",token:null,getToken:function(){var e=this;return new Promise((function(n){e.token&&n(e.token),console.log(" Config :: ",u.BaseUrl(),"\n this.url_session :: ",e.url_session),u.get(u.BaseUrl()+e.url_session).then((function(t){e.token=t.data,n(t.data)}))}))}},g=Object(s["a"])(Object(s["a"])({},u),{},{dPost:function(e,n){var t=arguments,o=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s,i,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=t.length>2&&void 0!==t[2]?t[2]:null,r.next=3,d.getToken();case 3:return i=r.sent,a={"X-CSRF-Token":i,"Content-Type":"application/json"},s&&(a=o.mergeHeaders(s,a)),r.abrupt("return",o.post(e,n,{headers:a}));case 7:case"end":return r.stop()}}),r)})))()},dGet:function(e){var n=arguments,t=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var r,s,i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:null,o.next=3,d.getToken();case 3:return s=o.sent,i={"X-CSRF-Token":s,"Content-Type":"application/json"},r&&(i=t.mergeHeaders(r,i)),o.abrupt("return",t.get(e,{headers:i}));case 7:case"end":return o.stop()}}),o)})))()},mergeHeaders:function(e,n){if(e)for(var t in e)n[t]=e[t];return n}}),f=g;function p(e){return new Promise((function(n){var t=document.createElement("script");t.setAttribute("src",e),t.onload=function(){console.log(" Chargement du script ok : ",e),n(!0)},document.head.appendChild(t)}))}var h={name:"logingoogle",props:{idHtml:{type:String,required:!0},returnUidInfo:{type:Boolean,default:!1},classRender:{type:Array,default:function(){return["mx-auto"]}}},mounted:function(){var e=this;window.google?this.getUserInfoFromFrame():p("https://accounts.google.com/gsi/client").then((function(){e.getUserInfoFromFrame()}))},computed:{idHtmlrender:function(){return"google-login-tab"+this.idHtml}},methods:{getUserInfoFromFrame:function(){var e=this;function n(n){console.log("Encoded JWT ID token: ",n),i.userAccess=Object(s["a"])(Object(s["a"])({},n),{},{client_id:n.clientId}),e.TryToLoginWithGoogle(),window.rxGoogle=i}console.log(" window.onload ! ",window.onload);var t=function(){window.google.accounts.id.initialize({client_id:i.client_id,callback:n}),window.google.accounts.id.renderButton(document.getElementById(e.idHtmlrender),{theme:"outline",size:"large"}),window.google.accounts.id.prompt()};t()},TryToLoginWithGoogle:function(){var e=this;return new Promise((function(n,t){f.post("/login-rx-vuejs/google-check",i.userAccess).then((function(t){e.isBusy=!1,e.alertDisplay=!0,e.alertType="alert-success",e.alertText="Connexion r√©ussie",e.$emit("ev_logingoogle",t.data),e.returnUidInfo||(t.reponse&&t.reponse.config.url!==t.reponse.request.responseURL?window.location.assign(t.reponse.request.responseURL):t.data&&t.data.createuser?e.stepe="final-gl-register":window.location.assign(window.location.origin)),n(t)}))["catch"]((function(n){e.isBusy=!1,e.alertDisplay=!0,e.alertType="alert-danger",e.alertText="Google : Erreur de connexion",n.error&&n.error.statusText&&""!=n.error.statusText&&(e.alertText=n.error.statusText),console.log(" Error ajax ",n.error),console.log(" Error ajax ",n.code),console.log(" Error ajax ",n.stack),t(n)}))}))}}},m=h,w=(t("0d95"),t("2877")),v=Object(w["a"])(m,o,r,!1,null,null,null);n["default"]=v.exports},aaa3:function(e,n,t){}}]);
//# sourceMappingURL=loginRxVuejs.umd.min.2.js.map