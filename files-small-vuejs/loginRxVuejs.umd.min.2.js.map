{"version":3,"sources":["webpack://loginRxVuejs/./src/App/components/logingoogle.vue?0a6e","webpack://loginRxVuejs/./src/App/components/logingoogle.vue?d70a","webpack://loginRxVuejs/./src/App/rx/google.js","webpack://loginRxVuejs/./src/config.js","webpack://loginRxVuejs/./src/App/session.js","webpack://loginRxVuejs/./src/App/utilities.js","webpack://loginRxVuejs/src/App/components/logingoogle.vue","webpack://loginRxVuejs/./src/App/components/logingoogle.vue?fdec","webpack://loginRxVuejs/./src/App/components/logingoogle.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","classRender","attrs","idHtmlrender","staticRenderFns","userAccess","client_id","config","AjaxBasic","getRandomIntInclusive","min","max","Math","ceil","floor","random","url_session","token","getToken","Promise","resolv","console","log","BaseUrl","get","then","resp","data","utilities","dPost","url","datas","configCustom","session","Token","configs","mergeHeaders","post","headers","dGet","i","loadScript","src","s","document","createElement","setAttribute","onload","head","appendChild","name","props","idHtml","type","String","required","returnUidInfo","Boolean","default","Array","mounted","window","google","getUserInfoFromFrame","computed","methods","self","handleCredentialResponse","response","clientId","TryToLoginWithGoogle","rxGoogle","accounts","id","initialize","callback","renderButton","prompt","goo","component"],"mappings":"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","file":"loginRxVuejs.umd.min.2.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logingoogle.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"buttton-google-aouth\",class:_vm.classRender,attrs:{\"id\":_vm.idHtmlrender}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//const gapi = window.gapi;\nexport default {\n  userAccess: {}, //contient les informations renvoyés par google apres approbations.\n  client_id:\n    \"513247959752-qapd9jb30pdtoh51m0h53070a2v8c4er.apps.googleusercontent.com\",\n};\n","import { AjaxBasic } from \"wbuutilities\";\nconst config = {\n  ...AjaxBasic,\n  /**\n   * Retoune un entier arleatoire entre [99-999]\n   */\n  getRandomIntInclusive(min = 99, max = 999) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n  },\n};\nexport default config;\n","import config from \"../config\";\nexport default {\n  url_session: \"/session/token\",\n  token: null,\n  /**\n   * Permet d'obtenir le token.\n   */\n  getToken() {\n    return new Promise((resolv) => {\n      if (this.token) resolv(this.token);\n      console.log(\n        \" Config :: \",\n        config.BaseUrl(),\n        \"\\n this.url_session :: \",\n        this.url_session\n      );\n      config.get(config.BaseUrl() + this.url_session).then((resp) => {\n        this.token = resp.data;\n        resolv(resp.data);\n      });\n    });\n  },\n};\n","import session from \"./session\";\nimport config from \"../config\";\n\nconst utilities = {\n  ...config,\n  /**\n   * configCustom[{name:\"\",value:\"\"}]\n   */\n  async dPost(url, datas, configCustom = null) {\n    const Token = await session.getToken();\n    var configs = {\n      \"X-CSRF-Token\": Token,\n      \"Content-Type\": \"application/json\",\n    };\n    if (configCustom) {\n      configs = this.mergeHeaders(configCustom, configs);\n    }\n    return this.post(url, datas, {\n      headers: configs,\n    });\n  },\n  /**\n   * Get datas;\n   */\n  async dGet(url, configCustom = null) {\n    const Token = await session.getToken();\n    var configs = {\n      \"X-CSRF-Token\": Token,\n      \"Content-Type\": \"application/json\",\n    };\n    if (configCustom) {\n      configs = this.mergeHeaders(configCustom, configs);\n    }\n    return this.get(url, {\n      headers: configs,\n    });\n  },\n  /**\n   *\n   */\n  mergeHeaders(configCustom, configs) {\n    if (configCustom) {\n      for (const i in configCustom) {\n        configs[i] = configCustom[i];\n      }\n    }\n    return configs;\n  },\n};\nexport default utilities;\n","<template>\n  <div\n    :id=\"idHtmlrender\"\n    class=\"buttton-google-aouth\"\n    :class=\"classRender\"\n  ></div>\n</template>\n\n<script>\nfunction loadScript(src) {\n  return new Promise((resolv) => {\n    var s = document.createElement(\"script\");\n    s.setAttribute(\"src\", src);\n    s.onload = function () {\n      console.log(\" Chargement du script ok : \", src);\n      resolv(true);\n    };\n    document.head.appendChild(s);\n  });\n}\nimport rxGoogle from \"../rx/google.js\";\nimport utilities from \"../utilities\";\nexport default {\n  name: \"logingoogle\",\n  props: {\n    idHtml: {\n      type: String,\n      required: true,\n    },\n    returnUidInfo: {\n      type: Boolean,\n      default: false,\n    },\n    classRender: {\n      type: Array,\n      default: function () {\n        return [\"mx-auto\"];\n      },\n    },\n  },\n  mounted() {\n    if (!window.google) {\n      loadScript(\"https://accounts.google.com/gsi/client\").then(() => {\n        this.getUserInfoFromFrame();\n      });\n    } else {\n      this.getUserInfoFromFrame();\n    }\n  },\n  computed: {\n    idHtmlrender() {\n      return \"google-login-tab\" + this.idHtml;\n    },\n  },\n  methods: {\n    getUserInfoFromFrame() {\n      var self = this;\n      function handleCredentialResponse(response) {\n        console.log(\"Encoded JWT ID token: \", response);\n        rxGoogle.userAccess = {\n          ...response,\n          client_id: response.clientId,\n        };\n        self.TryToLoginWithGoogle();\n        window.rxGoogle = rxGoogle;\n      }\n      console.log(\" window.onload ! \", window.onload);\n      const goo = () => {\n        window.google.accounts.id.initialize({\n          client_id: rxGoogle.client_id,\n          callback: handleCredentialResponse,\n        });\n        window.google.accounts.id.renderButton(\n          document.getElementById(self.idHtmlrender),\n          { theme: \"outline\", size: \"large\" } // customization attributes\n        );\n        window.google.accounts.id.prompt(); // also display the One Tap dialog\n      };\n      goo();\n    },\n    /**\n     * Ecoute un evenement afin de determiner si l'utilisateur a clique sur le bonton de connexion et que le processus soit terminé.\n     */\n    TryToLoginWithGoogle() {\n      // this.IsBusy();\n      // this.getFields();\n      return new Promise((resolv, reject) => {\n        utilities\n          .post(\"/login-rx-vuejs/google-check\", rxGoogle.userAccess)\n          .then((resp) => {\n            this.isBusy = false;\n            this.alertDisplay = true;\n            this.alertType = \"alert-success\";\n            this.alertText = \"Connexion réussie\";\n            this.$emit(\"ev_logingoogle\", resp.data);\n            if (this.returnUidInfo) {\n              resolv(resp);\n              return;\n            }\n            // --; Si l'utilisateur est redirigé vers un autre domaine.\n            if (\n              resp.reponse &&\n              resp.reponse.config.url !== resp.reponse.request.responseURL\n            ) {\n              window.location.assign(resp.reponse.request.responseURL);\n            }\n            // Il faut s'assurer que les données sont ok.\n            else if (resp.data && resp.data.createuser) {\n              this.stepe = \"final-gl-register\";\n            } else {\n              window.location.assign(window.location.origin);\n            }\n            resolv(resp);\n          })\n          .catch((errors) => {\n            this.isBusy = false;\n            this.alertDisplay = true;\n            this.alertType = \"alert-danger\";\n            this.alertText = \"Google : Erreur de connexion\";\n            if (\n              errors.error &&\n              errors.error.statusText &&\n              errors.error.statusText != \"\"\n            ) {\n              this.alertText = errors.error.statusText;\n            }\n            console.log(\" Error ajax \", errors.error);\n            console.log(\" Error ajax \", errors.code);\n            console.log(\" Error ajax \", errors.stack);\n            reject(errors);\n          });\n      });\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n.buttton-google-aouth {\n  max-width: 300px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: 2rem;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logingoogle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logingoogle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./logingoogle.vue?vue&type=template&id=2d1a67a0&\"\nimport script from \"./logingoogle.vue?vue&type=script&lang=js&\"\nexport * from \"./logingoogle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./logingoogle.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}